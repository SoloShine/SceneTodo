<hc:Window
    x:Class="SceneTodo.Views.ShortcutManagerWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    Title="Keyboard Shortcuts"
    Width="600"
    Height="500"
    Background="{DynamicResource RegionBrush}"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize">
    
    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,16">
            <TextBlock Text="Keyboard Shortcuts"
                      FontSize="20"
                      FontWeight="Bold"
                      Margin="0,0,0,8"/>
            <TextBlock Text="Customize keyboard shortcuts to match your workflow. Click on a shortcut to change it."
                      TextWrapping="Wrap"
                      Foreground="{DynamicResource ThirdTextBrush}"/>
        </StackPanel>

        <!-- Shortcuts List -->
        <Border Grid.Row="1"
                Background="{DynamicResource SecondaryRegionBrush}"
                BorderBrush="{DynamicResource BorderBrush}"
                BorderThickness="1"
                CornerRadius="4">
            <ScrollViewer VerticalScrollBarVisibility="Auto">
                <ItemsControl x:Name="ShortcutsItemsControl"
                             Padding="8">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Border Background="{DynamicResource RegionBrush}"
                                   BorderBrush="{DynamicResource BorderBrush}"
                                   BorderThickness="1"
                                   CornerRadius="4"
                                   Padding="12"
                                   Margin="4">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <!-- Action Info -->
                                    <StackPanel Grid.Column="0">
                                        <TextBlock Text="{Binding Value.Name}"
                                                  FontWeight="SemiBold"
                                                  Margin="0,0,0,4"/>
                                        <TextBlock Text="{Binding Value.Description}"
                                                  FontSize="11"
                                                  Foreground="{DynamicResource ThirdTextBrush}"/>
                                    </StackPanel>

                                    <!-- Shortcut Display -->
                                    <Border Grid.Column="1"
                                           Background="{DynamicResource PrimaryBrush}"
                                           BorderBrush="{DynamicResource BorderBrush}"
                                           BorderThickness="1"
                                           CornerRadius="4"
                                           Padding="8,4"
                                           Margin="8,0">
                                        <TextBlock Text="{Binding Value.DisplayText}"
                                                  FontFamily="Consolas"
                                                  FontWeight="Bold"
                                                  Foreground="White"
                                                  VerticalAlignment="Center"/>
                                    </Border>

                                    <!-- Edit Button -->
                                    <Button Grid.Column="2"
                                           Content="Edit"
                                           Click="EditShortcut_Click"
                                           Tag="{Binding Key}"
                                           Style="{StaticResource ButtonDefault}"
                                           Padding="12,4"/>
                                </Grid>
                            </Border>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
        </Border>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="2"
                   Orientation="Horizontal"
                   HorizontalAlignment="Right"
                   Margin="0,16,0,0">
            <Button Content="Reset to Defaults"
                   Click="ResetButton_Click"
                   Style="{StaticResource ButtonDefault}"
                   Margin="0,0,12,0"/>
            <Button Content="Save"
                   Click="SaveButton_Click"
                   Style="{StaticResource ButtonPrimary}"
                   Margin="0,0,12,0"/>
            <Button Content="Cancel"
                   Click="CancelButton_Click"
                   Style="{StaticResource ButtonDefault}"/>
        </StackPanel>
    </Grid>
</hc:Window>
