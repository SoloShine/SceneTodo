<hc:Window x:Class="SceneTodo.Views.EditTagWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        Title="Edit Tag" 
        Height="450" 
        Width="550"
        WindowStartupLocation="CenterScreen"
        Style="{StaticResource WindowWin10}">
    
    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <TextBlock Grid.Row="0" 
                   Text="{Binding WindowTitle}" 
                   FontSize="18" 
                   FontWeight="Bold"
                   Margin="0,0,0,20"/>

        <ScrollViewer Grid.Row="1" 
                     VerticalScrollBarVisibility="Auto"
                     Margin="0,0,0,20">
            <StackPanel>
                
                <TextBlock Text="Tag Name" 
                           FontWeight="Bold"
                           Margin="0,0,0,8"/>
                <hc:TextBox x:Name="NameTextBox"
                           Text="{Binding Tag.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                           hc:InfoElement.Placeholder="Enter tag name"
                           hc:InfoElement.Necessary="True"
                           Margin="0,0,0,20"
                           MaxLength="20"/>

                <Border BorderBrush="{DynamicResource BorderBrush}"
                       BorderThickness="2"
                       CornerRadius="8"
                       Padding="16"
                       Background="{DynamicResource SecondaryRegionBrush}"
                       Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="Color Preview" 
                                  FontWeight="Bold"
                                  Margin="0,0,0,8"/>
                        
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            
                            <Border Grid.Column="0"
                                   Width="40" 
                                   Height="40"
                                   Background="{Binding Tag.ColorBrush, Mode=OneWay}"
                                   CornerRadius="20"
                                   BorderBrush="{DynamicResource BorderBrush}"
                                   BorderThickness="3"
                                   Margin="0,0,16,0"
                                   VerticalAlignment="Center"/>
                            
                            <Border Grid.Column="1"
                                   Padding="12,6"
                                   Background="{Binding Tag.ColorBrush, Mode=OneWay}"
                                   CornerRadius="15"
                                   VerticalAlignment="Center"
                                   HorizontalAlignment="Left">
                                <TextBlock Text="{Binding Tag.Name, FallbackValue='Tag Preview'}" 
                                          FontSize="14"
                                          FontWeight="Bold"
                                          Foreground="White"/>
                            </Border>
                        </Grid>
                        
                        <TextBlock Text="{Binding Tag.Color, StringFormat='Color Code: {0}'}"
                                  FontSize="11"
                                  Foreground="{DynamicResource SecondaryTextBrush}"
                                  Margin="0,8,0,0"
                                  HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <TextBlock Text="Quick Color Selection" 
                           FontWeight="Bold"
                           Margin="0,0,0,8"/>
                <TextBlock Text="Click on a color to select it"
                          FontSize="11"
                          Foreground="{DynamicResource SecondaryTextBrush}"
                          Margin="0,0,0,8"/>
                
                <UniformGrid Columns="8" 
                            Rows="2" 
                            Margin="0,0,0,20">
                    <Border Background="#F44336" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Red"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#F44336">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#F44336">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#E91E63" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Pink"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#E91E63">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#E91E63">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#9C27B0" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Purple"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#9C27B0">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#9C27B0">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#3F51B5" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Indigo"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#3F51B5">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#3F51B5">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#2196F3" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Blue"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#2196F3">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#2196F3">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#00BCD4" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Cyan"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#00BCD4">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#00BCD4">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#009688" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Teal"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#009688">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#009688">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#4CAF50" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Green"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#4CAF50">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#4CAF50">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#8BC34A" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Light Green"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#8BC34A">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#8BC34A">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#CDDC39" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Lime"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#CDDC39">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#CDDC39">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#FFEB3B" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Yellow"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#FFEB3B">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#FFEB3B">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#FFC107" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Amber"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#FFC107">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#FFC107">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#FF9800" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Orange"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#FF9800">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#FF9800">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#FF5722" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Deep Orange"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#FF5722">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#FF5722">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#795548" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Brown"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#795548">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#795548">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                    
                    <Border Background="#607D8B" 
                            Margin="2"
                            Height="40"
                            CornerRadius="4"
                            Cursor="Hand"
                            ToolTip="Blue Grey"
                            MouseLeftButtonDown="PresetColor_MouseDown"
                            Tag="#607D8B">
                        <Border.Style>
                            <Style TargetType="Border">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding Tag.Color}" Value="#607D8B">
                                        <Setter Property="BorderBrush" Value="Black"/>
                                        <Setter Property="BorderThickness" Value="3"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Border.Style>
                    </Border>
                </UniformGrid>

                <TextBlock Text="Custom Color (Advanced)" 
                           FontWeight="Bold"
                           Margin="0,0,0,8"/>
                
                <hc:ColorPicker x:Name="ColorPicker"
                               Margin="0,0,0,16"/>
            </StackPanel>
        </ScrollViewer>

        <StackPanel Grid.Row="2" 
                   Orientation="Horizontal" 
                   HorizontalAlignment="Right">
            <Button Content="Save" 
                    Click="Save_Click"
                    Style="{StaticResource ButtonPrimary}"
                    MinWidth="100"
                    Margin="0,0,12,0"
                    Padding="12,6"/>
            <Button Content="Cancel" 
                    Click="Cancel_Click"
                    Style="{StaticResource ButtonDefault}"
                    MinWidth="100"
                    Padding="12,6"/>
        </StackPanel>
    </Grid>
</hc:Window>
