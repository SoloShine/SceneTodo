<hc:Window
    x:Class="SceneTodo.Views.AppearanceSettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:hc="https://handyorg.github.io/handycontrol"
    xmlns:iconPacks="http://metro.mahapps.com/winfx/xaml/iconpacks"
    Title="Appearance Settings"
    Width="500"
    Height="600"
    Background="{DynamicResource RegionBrush}"
    WindowStartupLocation="CenterOwner"
    ResizeMode="NoResize">
    
    <hc:Window.Resources>
        <Style x:Key="SectionHeaderStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="16" />
            <Setter Property="FontWeight" Value="Bold" />
            <Setter Property="Margin" Value="0,0,0,12" />
        </Style>
    </hc:Window.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="20">
            
            <!-- Overlay Transparency Section -->
            <TextBlock Text="Overlay Transparency" Style="{StaticResource SectionHeaderStyle}"/>
            
            <Border Background="{DynamicResource SecondaryRegionBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="16"
                    Margin="0,0,0,24">
                <StackPanel>
                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        
                        <Slider Grid.Column="0"
                                x:Name="TransparencySlider"
                                Minimum="10"
                                Maximum="100"
                                TickFrequency="10"
                                IsSnapToTickEnabled="True"
                                Value="{Binding OverlayTransparency, Mode=TwoWay}"
                                Margin="0,0,12,0"/>
                        
                        <TextBlock Grid.Column="1"
                                  Text="{Binding OverlayTransparency, StringFormat={}{0:F0}%}"
                                  FontSize="14"
                                  FontWeight="Bold"
                                  VerticalAlignment="Center"
                                  MinWidth="50"
                                  TextAlignment="Right"/>
                    </Grid>
                    
                    <!-- Quick Presets -->
                    <TextBlock Text="Quick Presets:" Margin="0,0,0,8" FontSize="12" Foreground="{DynamicResource ThirdTextBrush}"/>
                    <WrapPanel>
                        <Button Content="25%" 
                               Command="{Binding SetTransparencyCommand}" 
                               CommandParameter="25"
                               Style="{StaticResource ButtonDefault}"
                               Margin="0,0,8,0"/>
                        <Button Content="50%" 
                               Command="{Binding SetTransparencyCommand}" 
                               CommandParameter="50"
                               Style="{StaticResource ButtonDefault}"
                               Margin="0,0,8,0"/>
                        <Button Content="75%" 
                               Command="{Binding SetTransparencyCommand}" 
                               CommandParameter="75"
                               Style="{StaticResource ButtonDefault}"
                               Margin="0,0,8,0"/>
                        <Button Content="100%" 
                               Command="{Binding SetTransparencyCommand}" 
                               CommandParameter="100"
                               Style="{StaticResource ButtonDefault}"/>
                    </WrapPanel>
                    
                    <TextBlock Text="Tip: Use Ctrl+Scroll wheel on overlay to adjust transparency quickly"
                              FontSize="11"
                              Foreground="{DynamicResource ThirdTextBrush}"
                              TextWrapping="Wrap"
                              Margin="0,12,0,0"/>
                </StackPanel>
            </Border>

            <!-- Animation Settings Section -->
            <TextBlock Text="Animation Settings" Style="{StaticResource SectionHeaderStyle}"/>
            
            <Border Background="{DynamicResource SecondaryRegionBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="16"
                    Margin="0,0,0,24">
                <StackPanel>
                    <CheckBox Content="Enable animations"
                             IsChecked="{Binding EnableAnimations, Mode=TwoWay}"
                             Margin="0,0,0,8"/>
                    
                    <TextBlock Text="Animations make the interface feel more responsive and modern. Disable if you prefer instant transitions or have performance issues."
                              FontSize="11"
                              Foreground="{DynamicResource ThirdTextBrush}"
                              TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- Theme Settings Section -->
            <TextBlock Text="Theme Settings" Style="{StaticResource SectionHeaderStyle}"/>
            
            <Border Background="{DynamicResource SecondaryRegionBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="16"
                    Margin="0,0,0,24">
                <StackPanel>
                    <TextBlock Text="Theme:" Margin="0,0,0,8"/>
                    <ComboBox x:Name="ThemeComboBox"
                             SelectedIndex="0"
                             SelectionChanged="ThemeComboBox_SelectionChanged"
                             Margin="0,0,0,12">
                        <ComboBoxItem Content="Light Theme"/>
                        <ComboBoxItem Content="Dark Theme"/>
                    </ComboBox>
                    
                    <TextBlock Text="Note: Dark theme support is experimental and may have visual issues in some areas."
                              FontSize="11"
                              Foreground="{DynamicResource ThirdTextBrush}"
                              TextWrapping="Wrap"/>
                </StackPanel>
            </Border>

            <!-- Behavior Settings Section -->
            <TextBlock Text="Behavior Settings" Style="{StaticResource SectionHeaderStyle}"/>
            
            <Border Background="{DynamicResource SecondaryRegionBrush}"
                    BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1"
                    CornerRadius="4"
                    Padding="16"
                    Margin="0,0,0,24">
                <StackPanel>
                    <CheckBox Content="Remember collapse/expand state"
                             IsChecked="{Binding AppSettings.Behavior.RememberCollapseState, Mode=TwoWay}"
                             Margin="0,0,0,8"/>
                    <CheckBox Content="Auto expand on search"
                             IsChecked="{Binding AppSettings.Behavior.AutoExpandOnSearch, Mode=TwoWay}"
                             Margin="0,0,0,8"/>
                    <CheckBox Content="Show completed todos"
                             IsChecked="{Binding AppSettings.Behavior.ShowCompletedTodos, Mode=TwoWay}"
                             Margin="0,0,0,8"/>
                    <CheckBox Content="Enable desktop notifications"
                             IsChecked="{Binding AppSettings.Behavior.EnableDesktopNotifications, Mode=TwoWay}"
                             Margin="0,0,0,8"/>
                    <CheckBox Content="Enable sound reminders"
                             IsChecked="{Binding AppSettings.Behavior.EnableSoundReminders, Mode=TwoWay}"/>
                </StackPanel>
            </Border>

            <!-- Preview Section -->
            <TextBlock Text="Preview" Style="{StaticResource SectionHeaderStyle}"/>
            
            <Border x:Name="PreviewBorder"
                    Height="120"
                    Background="LightGray"
                    BorderBrush="#CCCCCC"
                    BorderThickness="1"
                    CornerRadius="10"
                    Opacity="{Binding ElementName=TransparencySlider, Path=Value, Converter={StaticResource PercentToOpacityConverter}}"
                    Margin="0,0,0,24">
                <DockPanel>
                    <Label Content="Todo Preview" 
                          HorizontalAlignment="Left"
                          DockPanel.Dock="Top"
                          Margin="8"/>
                    <StackPanel VerticalAlignment="Center" Margin="16">
                        <TextBlock Text="? High priority task" Margin="0,0,0,8"/>
                        <TextBlock Text="? Medium priority task" Margin="0,0,0,8"/>
                        <TextBlock Text="? Low priority task"/>
                    </StackPanel>
                </DockPanel>
            </Border>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal" 
                       HorizontalAlignment="Right">
                <Button Content="Reset to Defaults"
                       Click="ResetButton_Click"
                       Style="{StaticResource ButtonDefault}"
                       Margin="0,0,12,0"/>
                <Button Content="Save"
                       Click="SaveButton_Click"
                       Style="{StaticResource ButtonPrimary}"
                       Margin="0,0,12,0"/>
                <Button Content="Cancel"
                       Click="CancelButton_Click"
                       Style="{StaticResource ButtonDefault}"/>
            </StackPanel>
            
        </StackPanel>
    </ScrollViewer>
</hc:Window>
