# UI优化快速测试指南

## ?? 快速开始

### 测试环境
- ? 已完成构建
- ? 无编译错误
- ? 准备测试

---

## ?? 测试项目清单

### 测试1：关联操作按钮位置 ???

#### 步骤
1. 启动应用
2. 创建一个待办项"测试关联操作"
3. 编辑该待办项，添加2-3个关联操作
4. 保存并返回主列表
5. 观察待办项的显示

#### 验证点
- [ ] 关联操作按钮显示在第二行**右侧**
- [ ] 时间信息（如果有）显示在第二行**左侧**
- [ ] 鼠标悬停时，编辑按钮出现，但关联操作按钮**不移动**
- [ ] 多个关联操作按钮**水平排列**，不换行

#### 预期效果
```
[?] ?? 测试关联操作  [中]                    [编辑][添加][删除]
    ?? 开始: 2024-01-01 09:00            [打开链接][打开文件]
                                         ↑ 这里！位置固定！
```

#### 常见问题
? **问题**：关联操作按钮还在第一行  
? **解决**：检查是否使用了最新版本的 TodoItemControl.xaml

? **问题**：按钮在悬停时仍然移动  
? **解决**：这可能是缓存问题，重新构建项目

---

### 测试2：编辑窗口基本布局 ????

#### 步骤
1. 双击任意待办项打开编辑窗口
2. 观察窗口布局

#### 验证点
- [ ] 窗口宽度**明显变宽**（从400px到700px）
- [ ] 窗口高度**变矮了**（从750px到650px）
- [ ] 只有"**?? 基本信息**"默认展开
- [ ] 其他3个分组（应用绑定、时间、关联操作）默认**折叠**
- [ ] 每个分组有**清晰的图标和标题**

#### 预期效果
```
┌─────────────────────────────────────┐
│  编辑待办项                          │
├─────────────────────────────────────┤
│  ?? 基本信息 [展开]                │
│  ├─ 左列：内容、描述                │
│  └─ 右列：类型、优先级、名称        │
│                                     │
│  ?? 应用绑定设置 [?折叠]           │
│  ? 时间设置 [?折叠]               │
│  ?? 关联操作 [?折叠]               │
│                                     │
│  [?? 保存]  [? 取消]               │
└─────────────────────────────────────┘
```

---

### 测试3：基本信息双栏布局 ???

#### 步骤
1. 打开编辑窗口
2. 观察"基本信息"分组的布局

#### 验证点
- [ ] **左列**：
  - [ ] "待办内容"输入框（单行）
  - [ ] "描述"输入框（多行，约120px高）
- [ ] **右列**：
  - [ ] "待办类型"下拉框
  - [ ] "优先级"下拉框
  - [ ] "应用名称"输入框
- [ ] 左右两列**等宽**，中间有适当间距
- [ ] 描述输入框足够大，可以输入多行文本

#### 操作测试
1. 在描述框输入多行文本
   - [ ] 支持换行（Enter键）
   - [ ] 支持滚动条（文本过多时）
2. 调整窗口大小（如果可以）
   - [ ] 布局自适应

---

### 测试4：折叠面板交互 ????

#### 步骤
1. 打开编辑窗口
2. 依次点击每个分组的标题

#### 验证点
- [ ] 点击标题可以**展开/折叠**
- [ ] 展开时显示""图标
- [ ] 折叠时显示"?"图标
- [ ] 展开时有**平滑动画**（如果有）
- [ ] 可以**同时展开多个**分组
- [ ] 可以**全部折叠**（只看标题）

#### 各分组内容验证

**?? 应用绑定设置**
- [ ] 应用路径输入框 + 选择按钮
- [ ] 遮盖层位置下拉框（6个选项）
- [ ] X/Y偏移量数字输入框（并排显示）

**? 时间设置**
- [ ] 开始时间和结束时间**并排显示**（双栏）
- [ ] 提醒时间**独占一行**（跨两栏）
- [ ] 所有都是日期时间选择器

**?? 关联操作**
- [ ] 操作列表（ListBox，120px高）
- [ ] "? 添加操作"按钮（蓝色醒目）
- [ ] 每个操作显示：蓝色标签 + 路径 + 编辑/删除按钮

---

### 测试5：关联操作列表优化 ???

#### 步骤
1. 展开"?? 关联操作"分组
2. 添加几个测试操作

#### 验证点
- [ ] 操作名称显示为**蓝色标签**（白字）
- [ ] 目标路径显示为**灰色文本**
- [ ] 长路径会**自动截断**（...）
- [ ] 编辑按钮正常
- [ ] 删除按钮**显示为红色**

#### 视觉效果验证
```
┌────────────────────────────────────────┐
│ [打开网页]  https://example.com  [编辑][删除] │
│   ↑蓝底白字                      ↑红色按钮 │
└────────────────────────────────────────┘
```

---

### 测试6：子级待办项编辑 ???

#### 步骤
1. 创建一个软件待办项"父任务"，绑定一个应用
2. 为"父任务"添加子任务"子任务1"
3. 编辑"子任务1"

#### 验证点
- [ ] "?? 应用绑定设置"分组中的控件**全部禁用**
- [ ] 显示"应用路径 **(继承自父级):**"
- [ ] 输入框显示**灰色背景**
- [ ] 其他分组的控件**正常可用**
- [ ] 可以修改内容、优先级、时间等

---

### 测试7：底部按钮区域 ??

#### 验证点
- [ ] 按钮区域与内容区域有**明显分隔**（顶部边框线）
- [ ] 保存按钮：
  - [ ] 显示"?? 保存"
  - [ ] 宽度100px，高度35px
  - [ ] 蓝色背景（主题色）
- [ ] 取消按钮：
  - [ ] 显示"? 取消"
  - [ ] 宽度100px，高度35px
  - [ ] 灰色背景
- [ ] 两个按钮**大小一致**，容易点击

---

### 测试8：滚动支持 ??

#### 步骤
1. 打开编辑窗口
2. 展开所有分组

#### 验证点
- [ ] 如果内容超过窗口高度，显示**滚动条**
- [ ] 可以用鼠标滚轮滚动
- [ ] 底部按钮始终可见（固定在底部）
- [ ] 滚动流畅，无卡顿

---

### 测试9：保存和取消功能 ????

#### 步骤
1. 修改一些字段
2. 点击"?? 保存"

#### 验证点
- [ ] 修改被保存
- [ ] 窗口关闭
- [ ] 主列表更新

#### 步骤
1. 修改一些字段
2. 点击"? 取消"

#### 验证点
- [ ] 修改**未被保存**
- [ ] 窗口关闭
- [ ] 主列表**未变化**

---

## ?? 关键测试场景

### 场景1：新用户首次使用
1. 创建待办项
2. 打开编辑窗口
3. **期望**：
   - 只看到基本信息，不会感到复杂
   - 折叠的分组有清晰的标题，知道有什么功能
   - 保存按钮醒目，容易找到

### 场景2：创建软件待办项
1. 创建待办项
2. 打开编辑窗口
3. 修改类型为"软件待办"
4. 展开"?? 应用绑定设置"
5. 选择应用、设置位置
6. 展开"?? 关联操作"
7. 添加2-3个操作
8. 保存
9. **期望**：
   - 整个流程流畅
   - 每一步都很清晰
   - 关联操作按钮在主列表正常显示

### 场景3：编辑子任务
1. 编辑子任务
2. **期望**：
   - 应用绑定设置自动禁用
   - 有清晰的提示（继承自父级）
   - 可以修改其他内容

---

## ? 验收标准

### 必须通过 (P0)
- [x] 构建成功，无错误
- [ ] 关联操作按钮在第二行，不移动
- [ ] 编辑窗口使用折叠面板
- [ ] 双栏布局显示正常
- [ ] 所有功能正常工作（保存、取消、添加操作等）

### 应该通过 (P1)
- [ ] 折叠动画流畅
- [ ] 视觉效果符合设计
- [ ] 子级待办项正确禁用应用绑定
- [ ] 关联操作列表显示美观

### 可以优化 (P2)
- [ ] 窗口大小可调整
- [ ] 保存折叠状态
- [ ] 添加快捷键支持

---

## ?? 常见问题排查

### 问题1：窗口还是旧样式
**症状**：打开编辑窗口，还是单列布局，没有折叠面板

**原因**：
- 缓存问题
- 没有重新构建

**解决方案**：
1. 清理解决方案（Clean Solution）
2. 重新构建（Rebuild）
3. 重启应用

### 问题2：关联操作按钮还在第一行
**症状**：关联操作按钮和优先级标签在同一行

**原因**：
- TodoItemControl.xaml 没有更新
- 缓存问题

**解决方案**：
1. 检查 TodoItemControl.xaml 是否使用最新代码
2. 清理并重新构建

### 问题3：折叠面板无法展开
**症状**：点击分组标题没有反应

**原因**：
- Expander 控件问题
- 绑定错误

**解决方案**：
1. 检查输出窗口的错误信息
2. 确认使用的是标准 Expander 控件（不是 hc:Expander）

### 问题4：子级待办项的控件没有禁用
**症状**：编辑子任务时，应用绑定设置仍可编辑

**原因**：
- EditTodoItemWindow.xaml.cs 的逻辑没有更新

**解决方案**：
1. 检查 cs 文件的构造函数
2. 确认 isChildItem 判断逻辑正确

---

## ?? 测试截图建议

建议在以下场景截图记录：

1. **主列表视图** - 显示关联操作按钮在第二行
2. **编辑窗口默认状态** - 只展开基本信息
3. **编辑窗口全展开** - 所有分组都展开
4. **双栏布局细节** - 基本信息的左右分栏
5. **关联操作列表** - 显示蓝色标签和操作按钮
6. **子任务编辑窗口** - 显示禁用的控件

---

## ?? 测试记录

**测试日期**：____________  
**测试人**：____________  
**测试环境**：Windows _____ 

### 测试结果
- 关联操作位置：[ ] 通过  [ ] 失败  
- 编辑窗口布局：[ ] 通过  [ ] 失败  
- 折叠面板交互：[ ] 通过  [ ] 失败  
- 双栏布局：[ ] 通过  [ ] 失败  
- 子级禁用：[ ] 通过  [ ] 失败  

### 发现的问题
1. 
2. 
3. 

### 整体评价
- 用户体验：[ ] 优秀  [ ] 良好  [ ] 一般  [ ] 较差  
- 视觉效果：[ ] 优秀  [ ] 良好  [ ] 一般  [ ] 较差  
- 操作流畅度：[ ] 优秀  [ ] 良好  [ ] 一般  [ ] 较差  

---

**测试完成签名**：____________  
**日期**：____________
