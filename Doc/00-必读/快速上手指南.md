# ?? SceneTodo 快速上手指南

> **创建日期**: 2026-01-02 18:42:00  
> **最后更新**: 2026-01-02 18:42:00  
> **预计阅读时间**: 5-10分钟  
> **目标读者**: 新加入的开发者

---

## ?? 文档说明

本文档帮助新开发者在5-10分钟内快速了解项目并开始开发。

---

## ?? 项目概述

**SceneTodo** 是一个桌面待办事项悬浮窗应用，可以关联特定软件窗口并显示相关待办事项。

### 核心特性
- ?? 软件窗口关联
- ?? 优先级管理（高/中/低）
- ?? 关联操作（网页/文件/应用）
- ?? 历史记录（查看/恢复）
- ??? 右键菜单操作
- ?? SQLite数据持久化

---

## ? 5分钟快速开始

### 步骤1: 克隆项目（如果还没有）
```bash
git clone https://github.com/SoloShine/SceneTodo.git
cd SceneTodo
```

### 步骤2: 打开项目
使用 Visual Studio 2022+ 打开 `SceneTodo.csproj`

### 步骤3: 还原NuGet包
Visual Studio会自动还原，或手动执行：
```bash
dotnet restore
```

### 步骤4: 构建项目
```bash
dotnet build
```
或在VS中按 `Ctrl+Shift+B`

### 步骤5: 运行项目
```bash
dotnet run
```
或在VS中按 `F5`

---

## ?? 项目结构

```
SceneTodo/
├── Models/                   # 数据模型
│   ├── TodoItem.cs          # 数据库模型
│   ├── TodoItemModel.cs     # 业务模型
│   └── LinkedAction.cs      # 关联操作模型
├── ViewModels/               # 视图模型（MVVM）
│   ├── MainWindowViewModel.cs     # 主窗口逻辑
│   └── HistoryWindowViewModel.cs  # 历史记录逻辑
├── Views/                    # 视图（XAML）
│   ├── MainWindow.xaml      # 主窗口
│   ├── OverlayWindow.xaml   # 悬浮窗
│   ├── EditTodoItemWindow.xaml    # 编辑窗口
│   └── TodoItemControl.xaml       # 待办项控件?
├── Converters/               # 值转换器
│   ├── PriorityToBorderBrushConverter.cs  # 优先级颜色
│   ├── InjectedToTextConverter.cs         # 注入状态文本
│   └── ...
├── Services/                 # 服务层
│   └── Database/            # 数据库服务
│       ├── TodoDbContext.cs           # EF Core上下文
│       └── Repositories/              # 仓储模式
├── Utils/                    # 工具类
│   ├── IconHelper.cs        # 图标提取
│   ├── TrayIconManager.cs   # 托盘图标
│   └── NativeMethods.cs     # Win32 API
├── Doc/                      # 文档目录
│   ├── 00-必读/             # 核心文档?
│   ├── 01-会话记录/         # 开发会话记录
│   └── ...
├── SceneTodo.csproj         # 项目文件
└── TodoOverlayApp.sln       # 解决方案
```

**? 标记的是最重要的文件**

---

## ?? 关键概念

### 1. MVVM架构
```
View (XAML) <--绑定--> ViewModel (C#) <--操作--> Model (数据)
```
- **View**: XAML界面，纯展示
- **ViewModel**: 业务逻辑，命令处理
- **Model**: 数据模型，数据库映射

### 2. 待办项层级
```
根待办项（软件关联）
  ├── 子待办项1
  │   └── 孙待办项1
  └── 子待办项2
```
- 支持无限层级
- 父子关系通过ParentId维护

### 3. 数据库设计
- **TodoItems**: 待办项主表
- **TodoItemHistories**: 历史记录表
- **AutoTasks**: 自动任务表（未来使用）

### 4. 三个优先级
- **高优先级**: 红色边框 (Priority = 2)
- **中优先级**: 黄色边框 (Priority = 1)
- **低优先级**: 绿色边框 (Priority = 0)

### 5. 关联操作类型
- **网页**: HTTP/HTTPS链接
- **文件**: 本地文件路径
- **应用**: 可执行文件(.exe)

---

## ??? 开发环境设置

### 必需工具
- ? Visual Studio 2022 或更高版本
- ? .NET 8 SDK
- ? Git

### 推荐工具
- ?? SQLite Browser（查看数据库）
- ?? Postman（未来测试API）

### NuGet包（已配置）
```xml
<PackageReference Include="HandyControl" />
<PackageReference Include="Microsoft.EntityFrameworkCore.Sqlite" />
<PackageReference Include="MahApps.Metro.IconPacks" />
<PackageReference Include="Newtonsoft.Json" />
<PackageReference Include="Quartz" />
```

---

## ?? 必读文档

### 第一优先级（马上阅读）
1. ? **本文档** - 快速上手（当前）
2. ?? `项目状态总览.md` - 项目全貌（15分钟）
3. ?? `文档编写规范.md` - 文档标准（如果要写文档）

### 第二优先级（今天阅读）
4. ?? `Session-03-右键菜单改进/会话交接文档-v2.0-右键菜单改进.md` - 最新会话（30分钟）
5. ?? `Session-02-UI优化/` - UI优化会话（30分钟）
6. ?? `Session-01-P0核心功能实现/` - P0功能会话（1小时）

### 第三优先级（本周阅读）
7. ?? `02-功能文档/` - 各功能详细说明
8. ?? `03-测试文档/` - 测试指南和用例
9. ?? `04-技术文档/` - 技术实现细节

---

## ?? 学习路径

### Day 1: 熟悉项目（2-3小时）
- [ ] 阅读本快速指南（10分钟）
- [ ] 阅读项目状态总览（15分钟）
- [ ] 运行应用，体验功能（30分钟）
- [ ] 浏览代码结构（30分钟）
- [ ] 阅读最新会话文档（30分钟）

### Day 2-3: 深入理解（4-6小时）
- [ ] 阅读所有会话记录（2小时）
- [ ] 理解MVVM架构（1小时）
- [ ] 理解数据库设计（1小时）
- [ ] 调试核心功能（2小时）

### Week 1: 开始贡献（持续）
- [ ] 修复小问题或优化
- [ ] 编写或改进文档
- [ ] 参与功能讨论

---

## ?? 常用操作

### 1. 运行应用
```bash
# 开发模式（带控制台）
dotnet run

# 发布模式
dotnet run --configuration Release
```

### 2. 构建项目
```bash
# Debug构建
dotnet build

# Release构建
dotnet build --configuration Release
```

### 3. 清理项目
```bash
dotnet clean
```

### 4. 发布应用
```bash
dotnet publish -c Release -o ./publish
```

### 5. 查看数据库
数据库位置：`%LocalAppData%\SceneTodo\todo.db`

使用SQLite Browser打开查看。

---

## ?? 常见问题

### Q1: 构建失败？
**A**: 检查以下几点：
1. .NET 8 SDK已安装
2. NuGet包已还原
3. 检查VS的错误列表窗口

### Q2: 运行时数据库错误？
**A**: 
1. 删除旧数据库：`%LocalAppData%\SceneTodo\todo.db`
2. 重新运行应用，会自动创建新数据库

### Q3: 编码问题（中文乱码）？
**A**: 
1. 确保文件保存为UTF-8编码
2. 查看 `文档编写规范.md` 第3章

### Q4: Git提交时有大量modified文件？
**A**: 
1. 检查是否修改了`.gitignore`
2. 只提交自己修改的文件
3. 使用 `git status` 查看状态

### Q5: 如何调试悬浮窗？
**A**: 
1. 在MainWindowViewModel的注入相关代码设置断点
2. F5运行，触发注入操作
3. 查看调用堆栈和变量

---

## ?? 开发技巧

### 1. 使用Git分支
```bash
# 创建新分支
git checkout -b feature/your-feature-name

# 查看当前分支
git branch

# 切换分支
git checkout main
```

### 2. 查找代码
- `Ctrl+T`: 转到文件
- `Ctrl+,`: 转到符号
- `F12`: 转到定义
- `Shift+F12`: 查找所有引用

### 3. 调试技巧
- `F5`: 开始调试
- `F9`: 切换断点
- `F10`: 单步跳过
- `F11`: 单步进入
- `Shift+F11`: 单步跳出

### 4. 快速重构
- `Ctrl+R, Ctrl+R`: 重命名
- `Ctrl+.`: 快速操作
- `Ctrl+K, Ctrl+D`: 格式化文档

---

## ?? 开始你的第一个任务

### 简单任务（新手友好）?
1. **添加历史记录按钮** (10分钟)
   - 文件：`Views/MainWindow.xaml`
   - 添加一个按钮，绑定到 `ShowHistoryCommand`
   - 参考：Session-03的交接文档

2. **优化错误提示** (30分钟)
   - 找到所有 `MessageBox.Show` 调用
   - 统一使用 HandyControl 的 `MessageBox`
   - 优化提示文本

3. **添加代码注释** (持续)
   - 为重要方法添加XML注释
   - 为复杂逻辑添加行内注释

### 中等任务
4. **实现遮盖层位置选择** (3-4小时)
   - 这是P0最后一个功能
   - 参考：`P0核心功能实现指南.md`

5. **优化历史记录窗口** (2-3小时)
   - 实现分页加载
   - 优化显示效果

### 进阶任务
6. **重构MainWindowViewModel** (4-5小时)
   - 消除重复代码
   - 提取公共方法
   - 改善可维护性

---

## ?? 参考资源

### 官方文档
- **.NET 8**: https://learn.microsoft.com/zh-cn/dotnet/
- **WPF**: https://learn.microsoft.com/zh-cn/dotnet/desktop/wpf/
- **EF Core**: https://learn.microsoft.com/zh-cn/ef/core/

### 第三方库
- **HandyControl**: https://handyorg.github.io/
- **MahApps Icons**: https://github.com/MahApps/MahApps.Metro.IconPacks/
- **Quartz.NET**: https://www.quartz-scheduler.net/

### 学习资源
- **MVVM模式**: https://learn.microsoft.com/zh-cn/dotnet/desktop/wpf/data/data-binding-overview
- **依赖注入**: https://learn.microsoft.com/zh-cn/dotnet/core/extensions/dependency-injection
- **SQLite**: https://www.sqlite.org/docs.html

---

## ?? 欢迎加入！

现在你已经了解了基本信息，可以开始探索代码了！

### 下一步行动
1. ? 完成Day 1的学习任务
2. ?? 如有疑问，查看文档或提问
3. ?? 选择一个简单任务开始贡献
4. ?? 更新文档（如果发现错误或不清楚的地方）

### 开发建议
- ?? 先理解，再修改
- ?? 多看文档，少猜测
- ?? 小步提交，频繁测试
- ?? 遇到问题及时沟通
- ?? 记录你的决策和经验

---

## ?? 获取帮助

### 文档资源
- ?? `Doc/00-必读/` - 核心文档
- ?? `Doc/01-会话记录/` - 历史会话
- ?? `Doc/02-功能文档/` - 功能说明

### 报告问题
- **GitHub Issues**: 报告Bug和功能请求
- **Pull Request**: 提交代码改进

---

## ? 检查清单

### 环境准备
- [ ] Visual Studio 2022+ 已安装
- [ ] .NET 8 SDK 已安装
- [ ] Git 已配置
- [ ] 项目已克隆
- [ ] 项目可以构建和运行

### 文档阅读
- [ ] 快速上手指南（本文档）
- [ ] 项目状态总览
- [ ] 最新会话记录
- [ ] 文档编写规范（如果要写文档）

### 代码理解
- [ ] 理解项目结构
- [ ] 理解MVVM架构
- [ ] 运行并体验功能
- [ ] 浏览核心代码

### 准备开发
- [ ] 创建开发分支
- [ ] 选择第一个任务
- [ ] 理解任务需求
- [ ] 准备开始编码

---

**祝你开发愉快！** ??

**有任何问题，查看文档或提问！** ??

---

**文档版本**: 1.0  
**创建日期**: 2026-01-02 18:42:00  
**最后更新**: 2026-01-02 18:42:00  
**维护者**: SceneTodo Team
