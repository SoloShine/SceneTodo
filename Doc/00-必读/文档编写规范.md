# ?? SceneTodo 文档编写规范

> **创建日期**: 2026-01-02 18:16:05  
> **版本**: 1.0  
> **状态**: 正式发布

---

## ?? 文档说明

本文档规定了 SceneTodo 项目所有文档的编写规范，包括命名、格式、时间处理等。

**重要**: 所有开发者（包括AI Agent）在创建或更新文档时必须遵守本规范。

---

## 1. 文档命名规范

### 1.1 文件命名
- **使用中文命名**（便于阅读）
- **使用连字符分隔**（多个词语）
- **禁止使用空格**（避免路径问题）

**命名格式**:
```
- 功能文档: 功能名称.md
- 测试文档: 测试指南-功能名称.md
- 会话文档: 会话交接文档-vX.X.md
- 技术文档: 技术主题.md
```

**示例**:
```
? 正确:
- 优先级功能.md
- 测试指南-右键菜单.md
- 会话交接文档-v3.0.md

? 错误:
- priority feature.md (使用空格)
- test guide right menu.md (英文且使用空格)
- handover.md (不够描述性)
```

---

## 2. 文档结构规范

### 2.1 文档头部
每个文档必须包含以下头部信息：

```markdown
# ?? 文档标题

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: X.X  
> **状态**: [草稿/审核中/正式发布/已归档]

---

## ?? 文档说明

简要说明本文档的目的、受众和使用场景。
```

### 2.2 章节结构
- 使用标准Markdown标题层级（# ## ### ####）
- 每个一级标题前后空一行
- 使用清晰的编号和层级

### 2.3 状态标识
使用统一的状态标识符：
- ? **已完成** - 功能已实现并测试
- ? **进行中** - 正在开发或测试
- ?? **部分完成** - 部分实现，有限制
- ? **未实现** - 尚未开发
- ??? **已归档** - 旧版本，仅供参考

---

## 3. 时间处理规范 ??????

### 3.1 时区处理
- ? **必须使用本地时区时间**记录所有日志和文档
- ? **禁止使用 UTC 或其他时区**
- ? **禁止使用占位符**（如 2025-01-XX）
- ? **时间格式**: `YYYY-MM-DD HH:mm:ss`（24小时制）

### 3.2 时间获取方法

#### 方法1: 使用 PowerShell（推荐 - Windows）
```powershell
# 获取当前时间
Get-Date -Format "yyyy-MM-dd HH:mm:ss"

# 输出示例: 2026-01-02 18:16:05
```

#### 方法2: 使用 CMD（Windows）
```cmd
# 获取日期和时间
date /T && time /T

# 输出示例: 2026-01-02 18:16
```

#### 方法3: 使用 Bash（Linux/Mac）
```bash
# 获取当前时间
date '+%Y-%m-%d %H:%M:%S'

# 输出示例: 2026-01-02 18:16:05
```

#### 方法4: 在 Markdown 中使用（AI Agent）
在创建或更新文档时，AI Agent 应该：
1. 首先执行命令获取真实时间
2. 将时间写入文档
3. 不使用占位符或估算时间

**错误示例**:
```markdown
? **创建日期**: 2025-01-XX  
? **最后更新**: 2025-01-XX  
? **会话时间**: 今天
```

**正确示例**:
```markdown
? **创建日期**: 2026-01-02 18:16:05  
? **最后更新**: 2026-01-02 18:20:30  
? **会话时间**: 2026-01-02 15:30:00 - 18:16:05
```

### 3.3 时间准确性要求

#### 严格要求
- ? **必须使用系统当前时间**，禁止手动设置或估算时间
- ? **精确到秒**：所有时间记录必须精确到秒级别
- ? **时间一致性**：同一文档内的时间必须按顺序递增，不得出现时间倒退
- ? **禁止伪造**：不得伪造或篡改时间戳
- ? **检查机制**：每次写入时间前必须重新获取当前时间，不得使用缓存

#### 时间合理性检查
更新文档时，检查时间是否合理：
```markdown
? 合理:
创建日期: 2026-01-02 15:30:00
最后更新: 2026-01-02 18:16:05
（相差约2小时46分，合理）

? 不合理:
创建日期: 2026-01-02 15:30:00
最后更新: 2026-01-02 15:30:00
（完全相同，不可能）

? 不合理:
创建日期: 2026-01-02 18:16:05
最后更新: 2026-01-02 15:30:00
（时间倒退，错误）
```

### 3.4 变更记录时间处理

#### 变更记录表格示例
```markdown
## ?? 变更记录

| 日期 | 版本 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 2026-01-02 18:16:05 | 1.0 | 初始版本 | Agent-01 |
| 2026-01-02 18:20:30 | 1.1 | 添加时间规范 | Agent-01 |
| 2026-01-03 09:30:15 | 1.2 | 修复Bug | Agent-02 |
```

#### 要求
- ? **每次变更必须记录真实时间**：在变更记录的表格中，必须使用实际执行变更时的系统时间
- ? **时间间隔合理性**：相邻变更的时间间隔应合理反映实际工作时间
- ? **时间格式统一**：变更记录表格中的时间格式与文档头保持一致
- ? **禁止批量填写**：不要在一次提交中为多个历史变更填写相同时间

### 3.5 会话时间记录

会话文档必须记录：
1. **会话开始时间**
2. **会话结束时间**
3. **总耗时**

**示例**:
```markdown
## ?? 会话信息

**会话开始**: 2026-01-02 15:30:00  
**会话结束**: 2026-01-02 18:16:05  
**总耗时**: 2小时46分钟  
**主要工作**: 文档整理和归档
```

---

## 4. 文档版本管理

### 4.1 版本号规则
使用语义化版本号：`主版本.次版本.修订版本`

- **主版本**：重大变更，不兼容的修改
- **次版本**：新增功能，向后兼容
- **修订版本**：Bug修复，小改动

**示例**:
- v1.0 - 初始版本
- v1.1 - 添加新章节
- v1.1.1 - 修复错别字
- v2.0 - 重构整个文档

### 4.2 版本历史
在文档末尾添加版本历史：

```markdown
---

## ?? 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-02 18:16:05 | 初始版本 | Agent-01 |
| 1.1 | 2026-01-02 18:20:30 | 添加时间规范 | Agent-01 |

---

**文档版本**: 1.1  
**创建日期**: 2026-01-02 18:16:05  
**最后更新**: 2026-01-02 18:20:30
```

---

## 5. Markdown 格式规范

### 5.1 标题
- 使用 ATX 风格标题（# ## ###）
- 一级标题使用表情符号增强可读性
- 标题前后空一行

```markdown
? 正确:
# ?? 主标题

## 二级标题

### 三级标题

? 错误:
#主标题（缺少空格）
##二级标题（缺少空格）
```

### 5.2 列表
- 使用 `-` 作为无序列表标记
- 有序列表使用数字 + `.`
- 列表项内容缩进对齐

### 5.3 代码块
- 使用三个反引号标记代码块
- 指定语言类型（syntax highlighting）

```markdown
? 正确:
```powershell
Get-Date -Format "yyyy-MM-dd HH:mm:ss"
```

? 错误:
```
Get-Date -Format "yyyy-MM-dd HH:mm:ss"
```（缺少语言标识）
```

### 5.4 链接
- 使用相对路径链接项目内文档
- 使用绝对URL链接外部资源

```markdown
? 正确:
[项目状态总览](项目状态总览.md)
[.NET 8文档](https://learn.microsoft.com/zh-cn/dotnet/)

? 错误:
[项目状态总览](D:\Documents\GitHub\SceneTodo\Doc\00-必读\项目状态总览.md)
（使用绝对路径）
```

### 5.5 表格
- 使用管道符 `|` 分隔列
- 表头和内容之间使用 `-` 分隔
- 对齐方式保持一致

```markdown
| 列1 | 列2 | 列3 |
|------|------|------|
| 内容1 | 内容2 | 内容3 |
```

---

## 6. 内容编写规范

### 6.1 语言风格
- 使用简洁、清晰的中文
- 避免冗长的句子
- 专业术语使用英文（首次出现时中英对照）

**示例**:
```markdown
? 正确:
使用 MVVM（Model-View-ViewModel）架构模式。

? 错误:
使用模型-视图-视图模型架构模式。
```

### 6.2 专业术语
常用术语对照表：

| 中文 | 英文 | 说明 |
|------|------|------|
| 视图模型 | ViewModel | MVVM中的VM |
| 数据绑定 | Data Binding | WPF核心概念 |
| 依赖注入 | Dependency Injection | DI |
| 实体框架 | Entity Framework | EF Core |

### 6.3 代码示例
- 提供完整的代码示例
- 添加必要的注释
- 说明代码用途和效果

```markdown
? 正确:
```csharp
// 获取当前时间并格式化
var now = DateTime.Now;
var formattedTime = now.ToString("yyyy-MM-dd HH:mm:ss");
```

? 错误:
```csharp
var now = DateTime.Now;
var formattedTime = now.ToString("yyyy-MM-dd HH:mm:ss");
```（缺少注释）
```

---

## 7. 文档分类与存放

### 7.1 目录分类
按照以下规则存放文档：

| 目录 | 用途 | 文档类型 |
|------|------|----------|
| 00-必读/ | 核心文档 | README、状态总览、交接文档、快速指南 |
| 01-会话记录/ | 历史会话 | 会话交接、修改记录、测试报告 |
| 02-功能文档/ | 功能说明 | 功能介绍、使用指南 |
| 03-测试文档/ | 测试相关 | 测试计划、测试用例、测试报告 |
| 04-技术文档/ | 技术细节 | 架构设计、数据库Schema、API |
| 05-用户文档/ | 用户手册 | 使用手册、FAQ |
| 06-规划文档/ | 产品规划 | PRD、路线图、需求文档 |

### 7.2 会话记录命名
会话目录命名格式：
```
Session-XX-主题描述/
```

**示例**:
```
? 正确:
- Session-01-P0核心功能实现/
- Session-02-UI优化/
- Session-03-右键菜单改进/

? 错误:
- Session1/（缺少描述）
- 2026-01-02/（使用日期）
```

---

## 8. 文档更新规范

### 8.1 更新流程
1. **获取当前时间**（使用系统命令）
2. **修改文档内容**
3. **更新"最后更新"时间**
4. **添加版本历史记录**
5. **更新版本号**（如需要）

### 8.2 更新记录
每次更新必须记录：
- 更新时间（精确到秒）
- 更新内容（简要描述）
- 更新人（Agent或开发者名称）

### 8.3 重大更新
以下情况需要创建新版本文档：
- 文档结构重大调整
- 内容大幅增减（超过50%）
- 目标受众变化

---

## 9. 质量检查清单

### 9.1 提交前检查
在提交文档前，必须检查：

- [ ] ? 时间使用真实的系统时间（非占位符）
- [ ] ? 时间格式正确（YYYY-MM-DD HH:mm:ss）
- [ ] ? 文档头部信息完整
- [ ] ? 版本号正确
- [ ] ? 链接可正常访问
- [ ] ? 代码示例可运行
- [ ] ? 无错别字
- [ ] ? Markdown格式正确
- [ ] ? 文件编码为UTF-8
- [ ] ? 行尾符统一（LF或CRLF）

### 9.2 自动化检查
可使用以下工具：
- **Markdown Lint**: 检查Markdown格式
- **Vale**: 检查文档风格
- **Git Hooks**: 提交前自动检查

---

## 10. 特殊场景处理

### 10.1 历史文档补充时间
如果需要为历史文档补充时间：

**方法1: 使用Git历史**
```bash
# 查看文件的创建时间
git log --diff-filter=A --follow --format=%aI -- 文件路径

# 查看文件的最后修改时间
git log -1 --format=%aI -- 文件路径
```

**方法2: 标注为估算时间**
```markdown
> **创建日期**: 2026-01-01 10:00:00 [估算]  
> **说明**: 根据Git历史记录估算，实际时间可能有偏差
```

### 10.2 跨时区协作
如果团队成员在不同时区：
- 统一使用北京时间（UTC+8）
- 或在文档中明确标注时区

```markdown
**创建日期**: 2026-01-02 18:16:05 (UTC+8)
```

### 10.3 长期项目
对于长期项目，定期归档旧文档：
- 每个季度归档一次
- 在归档文档中添加 `[已归档]` 标记
- 说明归档原因和时间

---

## 11. 示例模板

### 11.1 功能文档模板

```markdown
# ?? [功能名称]功能文档

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: 1.0  
> **状态**: 正式发布

---

## ?? 功能说明

简要描述功能的目的和作用。

---

## ? 功能特性

- 特性1
- 特性2
- 特性3

---

## ?? 使用方法

### 步骤1
操作说明...

### 步骤2
操作说明...

---

## ?? 技术实现

### 关键代码
```csharp
// 代码示例
```

### 关键文件
- 文件1
- 文件2

---

## ?? 测试

### 测试用例
1. 测试场景1
2. 测试场景2

---

## ?? 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | YYYY-MM-DD HH:mm:ss | 初始版本 | Agent-XX |

---

**文档版本**: 1.0  
**创建日期**: YYYY-MM-DD HH:mm:ss  
**最后更新**: YYYY-MM-DD HH:mm:ss
```

### 11.2 会话交接文档模板

```markdown
# ?? SceneTodo 会话交接文档 vX.X

> **会话时间**: YYYY-MM-DD HH:mm:ss - YYYY-MM-DD HH:mm:ss  
> **总耗时**: X小时XX分钟  
> **会话主题**: [主题描述]  
> **文档版本**: X.X  
> **状态**: 已完成

---

## ?? 会话概述

简要说明本次会话的目标和完成情况。

---

## ? 完成的工作

### 1. 工作项1
详细说明...

### 2. 工作项2
详细说明...

---

## ?? 统计数据

- 新增代码: XX行
- 修改文件: XX个
- 新增文档: XX个

---

## ?? 重要注意事项

1. 注意事项1
2. 注意事项2

---

## ?? 下一步工作

1. 任务1
2. 任务2

---

## ?? 变更记录

| 时间 | 文件 | 变更类型 | 说明 |
|------|------|----------|------|
| YYYY-MM-DD HH:mm:ss | 文件1 | 新增 | 说明 |
| YYYY-MM-DD HH:mm:ss | 文件2 | 修改 | 说明 |

---

**文档版本**: X.X  
**创建日期**: YYYY-MM-DD HH:mm:ss  
**最后更新**: YYYY-MM-DD HH:mm:ss
```

---

## 12. 常见问题

### Q1: 如何快速获取当前时间？
**A**: 在终端执行 `Get-Date -Format "yyyy-MM-dd HH:mm:ss"`（PowerShell）

### Q2: 文档放在哪个目录？
**A**: 参考第7章"文档分类与存放"，根据文档类型选择目录。

### Q3: 如何处理旧文档的时间占位符？
**A**: 可以使用Git历史查找实际时间，或标注为"[估算]"。

### Q4: 是否需要每次小修改都更新版本号？
**A**: 
- 修复错别字、格式调整：不需要更新版本号
- 新增章节、修改内容：更新修订版本（如1.0→1.1）
- 重大重构：更新主版本（如1.X→2.0）

---

## 13. 规范执行

### 13.1 强制性规范（必须遵守）
- ?? **时间必须使用真实系统时间**
- ?? **禁止使用占位符（如2025-01-XX）**
- ?? **文档头部信息必须完整**
- ?? **时间格式必须统一**

### 13.2 建议性规范（推荐遵守）
- 使用清晰的标题结构
- 添加必要的代码注释
- 提供示例和截图

### 13.3 违反规范的处理
如果发现文档违反规范：
1. 在文档顶部添加 `[不规范]` 标记
2. 说明违反的具体规范
3. 提供改进建议
4. 在下次更新时修正

---

## 14. 规范更新

### 14.1 更新流程
本规范文档也会持续更新：
1. 收集反馈和问题
2. 讨论改进方案
3. 更新规范内容
4. 通知所有成员

### 14.2 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-02 18:16:05 | 初始版本，添加时间处理规范 | AI Agent |

---

## ?? 反馈与建议

如果您对本规范有任何建议或疑问：
1. 在项目中创建Issue
2. 在文档中添加注释
3. 在会话记录中说明

---

**祝您编写愉快！规范的文档让协作更高效！** ???

---

**文档版本**: 1.0  
**创建日期**: 2026-01-02 18:16:05  
**最后更新**: 2026-01-02 18:16:05  
**维护者**: SceneTodo Team
