# ?? SceneTodo 文档编写规范

> **创建日期**: 2026-01-02 18:16:05  
> **最后更新**: 2026-01-02 21:43:56  
> **版本**: 1.2  
> **状态**: 正式发布

---

## ?? 文档说明

本文档规定了 SceneTodo 项目所有文档的编写规范，包括命名、格式、时间处理、文档归档等。

**重要**: 所有开发者（包括AI Agent）在创建或更新文档时必须遵守本规范。

---

## 1. 文档命名规范

### 1.1 文件命名
- **使用中文命名**（便于阅读）
- **使用连字符分隔**（多个词语）
- **禁止使用空格**（避免路径问题）

**命名格式**:
```
- 功能文档: 功能名称.md
- 测试文档: 测试指南-功能名称.md
- 会话文档: 会话交接文档-vX.X.md
- 技术文档: 技术主题.md
```

**示例**:
```
? 正确:
- 优先级功能.md
- 测试指南-右键菜单.md
- 会话交接文档-v3.0.md

? 错误:
- priority feature.md (使用空格)
- test guide right menu.md (英文且使用空格)
- handover.md (不够描述性)
```

---

## 2. 文档结构规范

### 2.1 文档头部
每个文档必须包含以下头部信息：

```markdown
# ?? 文档标题

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: X.X  
> **状态**: [草稿/审核中/正式发布/已归档]

---

## ?? 文档说明

简要说明本文档的目的、受众和使用场景。
```

### 2.2 章节结构
- 使用标准Markdown标题层级（# ## ### ####）
- 每个一级标题前后空一行
- 使用清晰的编号和层级

### 2.3 状态标识
使用统一的状态标识符：
- ? **已完成** - 功能已实现并测试
- ? **进行中** - 正在开发或测试
- ?? **部分完成** - 部分实现，有限制
- ? **未实现** - 尚未开发
- ??? **已归档** - 旧版本，仅供参考

---

## 3. 时间处理规范 ??????

### 3.1 时区处理
- ? **必须使用本地时区时间**记录所有日志和文档
- ? **禁止使用 UTC 或其他时区**
- ? **禁止使用占位符**（如 2025-01-XX）
- ? **时间格式**: `YYYY-MM-DD HH:mm:ss`（24小时制）

### 3.2 时间获取方法

#### 方法1: 使用 PowerShell（推荐 - Windows）
```powershell
# 获取当前时间
Get-Date -Format "yyyy-MM-dd HH:mm:ss"

# 输出示例: 2026-01-02 18:16:05
```

#### 方法2: 使用 CMD（Windows）
```cmd
# 获取日期和时间
date /T && time /T

# 输出示例: 2026-01-02 18:16
```

#### 方法3: 使用 Bash（Linux/Mac）
```bash
# 获取当前时间
date '+%Y-%m-%d %H:%M:%S'

# 输出示例: 2026-01-02 18:16:05
```

#### 方法4: 在 Markdown 中使用（AI Agent）
在创建或更新文档时，AI Agent 应该：
1. 首先执行命令获取真实时间
2. 将时间写入文档
3. 不使用占位符或估算时间

**错误示例**:
```markdown
? **创建日期**: 2025-01-XX  
? **最后更新**: 2025-01-XX  
? **会话时间**: 今天
```

**正确示例**:
```markdown
? **创建日期**: 2026-01-02 18:16:05  
? **最后更新**: 2026-01-02 18:20:30  
? **会话时间**: 2026-01-02 15:30:00 - 18:16:05
```

### 3.3 时间准确性要求

#### 严格要求
- ? **必须使用系统当前时间**，禁止手动设置或估算时间
- ? **精确到秒**：所有时间记录必须精确到秒级别
- ? **时间一致性**：同一文档内的时间必须按顺序递增，不得出现时间倒退
- ? **禁止伪造**：不得伪造或篡改时间戳
- ? **检查机制**：每次写入时间前必须重新获取当前时间，不得使用缓存

#### 时间合理性检查
更新文档时，检查时间是否合理：
```markdown
? 合理:
创建日期: 2026-01-02 15:30:00
最后更新: 2026-01-02 18:16:05
（相差约2小时46分，合理）

? 不合理:
创建日期: 2026-01-02 15:30:00
最后更新: 2026-01-02 15:30:00
（完全相同，不可能）

? 不合理:
创建日期: 2026-01-02 18:16:05
最后更新: 2026-01-02 15:30:00
（时间倒退，错误）
```

### 3.4 变更记录时间处理

#### 变更记录表格示例
```markdown
## ?? 变更记录

| 日期 | 版本 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 2026-01-02 18:16:05 | 1.0 | 初始版本 | Agent-01 |
| 2026-01-02 18:20:30 | 1.1 | 添加时间规范 | Agent-01 |
| 2026-01-03 09:30:15 | 1.2 | 修复Bug | Agent-02 |
```

#### 要求
- ? **每次变更必须记录真实时间**：在变更记录的表格中，必须使用实际执行变更时的系统时间
- ? **时间间隔合理性**：相邻变更的时间间隔应合理反映实际工作时间
- ? **时间格式统一**：变更记录表格中的时间格式与文档头保持一致
- ? **禁止批量填写**：不要在一次提交中为多个历史变更填写相同时间

### 3.5 会话时间记录

会话文档必须记录：
1. **会话开始时间**
2. **会话结束时间**
3. **总耗时**

**示例**:
```markdown
## ?? 会话信息

**会话开始**: 2026-01-02 15:30:00  
**会话结束**: 2026-01-02 18:16:05  
**总耗时**: 2小时46分钟  
**主要工作**: 文档整理和归档
```

---

## 4. 文档版本管理

### 4.1 版本号规则
使用语义化版本号：`主版本.次版本.修订版本`

- **主版本**：重大变更，不兼容的修改
- **次版本**：新增功能，向后兼容
- **修订版本**：Bug修复，小改动

**示例**:
- v1.0 - 初始版本
- v1.1 - 添加新章节
- v1.1.1 - 修复错别字
- v2.0 - 重构整个文档

### 4.2 版本历史
在文档末尾添加版本历史：

```markdown
---

## ?? 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-02 18:16:05 | 初始版本 | Agent-01 |
| 1.1 | 2026-01-02 18:20:30 | 添加时间规范 | Agent-01 |

---

**文档版本**: 1.1  
**创建日期**: 2026-01-02 18:16:05  
**最后更新**: 2026-01-02 18:20:30
```

---

## 5. Markdown 格式规范

### 5.1 标题
- 使用 ATX 风格标题（# ## ###）
- 一级标题使用表情符号增强可读性
- 标题前后空一行

```markdown
? 正确:
# ?? 主标题

## 二级标题

### 三级标题

? 错误:
#主标题（缺少空格）
##二级标题（缺少空格）
```

### 5.2 列表
- 使用 `-` 作为无序列表标记
- 有序列表使用数字 + `.` 
- 列表项内容缩进对齐

### 5.3 代码块
- 使用三个反引号标记代码块
- 指定语言类型（syntax highlighting）

```markdown
? 正确:
```powershell
Get-Date -Format "yyyy-MM-dd HH:mm:ss"
```

? 错误:
```
Get-Date -Format "yyyy-MM-dd HH:mm:ss"
```（缺少语言标识）
```

### 5.4 链接
- 使用相对路径链接项目内文档
- 使用绝对URL链接外部资源

```markdown
? 正确:
[项目状态总览](项目状态总览.md)
[.NET 8文档](https://learn.microsoft.com/zh-cn/dotnet/)

? 错误:
[项目状态总览](D:\Documents\GitHub\SceneTodo\Doc\00-必读\项目状态总览.md)
（使用绝对路径）
```

### 5.5 表格
- 使用管道符 `|` 分隔列
- 表头和内容之间使用 `-` 分隔
- 对齐方式保持一致

```markdown
| 列1 | 列2 | 列3 |
|------|------|------|
| 内容1 | 内容2 | 内容3 |
```

---

## 6. 内容编写规范

### 6.1 语言风格
- 使用简洁、清晰的中文
- 避免冗长的句子
- 专业术语使用英文（首次出现时中英对照）

**示例**:
```markdown
? 正确:
使用 MVVM（Model-View-ViewModel）架构模式。

? 错误:
使用模型-视图-视图模型架构模式。
```

### 6.2 专业术语
常用术语对照表：

| 中文 | 英文 | 说明 |
|------|------|------|
| 视图模型 | ViewModel | MVVM中的VM |
| 数据绑定 | Data Binding | WPF核心概念 |
| 依赖注入 | Dependency Injection | DI |
| 实体框架 | Entity Framework | EF Core |

### 6.3 代码示例
- 提供完整的代码示例
- 添加必要的注释
- 说明代码用途和效果

```markdown
? 正确:
```csharp
// 获取当前时间并格式化
var now = DateTime.Now;
var formattedTime = now.ToString("yyyy-MM-dd HH:mm:ss");
```

? 错误:
```csharp
var now = DateTime.Now;
var formattedTime = now.ToString("yyyy-MM-dd HH:mm:ss");
```（缺少注释）
```

---

## 7. 文档分类与存放

### 7.1 目录分类
按照以下规则存放文档：

| 目录 | 用途 | 文档类型 |
|------|------|----------|
| 00-必读/ | 核心文档 | README、状态总览、交接文档、快速指南 |
| 01-会话记录/ | 历史会话 | 会话交接、修改记录、测试报告 |
| 02-功能文档/ | 功能说明 | 功能介绍、使用指南 |
| 03-测试文档/ | 测试相关 | 测试计划、测试用例、测试报告 |
| 04-技术文档/ | 技术细节 | 架构设计、数据库Schema、API |
| 05-用户文档/ | 用户手册 | 使用手册、FAQ |
| 06-规划文档/ | 产品规划 | PRD、路线图、需求文档 |

### 7.2 会话记录命名
会话目录命名格式：
```
Session-XX-主题描述/
```

**示例**:
```
? 正确:
- Session-01-P0核心功能实现/
- Session-02-UI优化/
- Session-03-右键菜单改进/

? 错误:
- Session1/（缺少描述）
- 2026-01-02/（使用日期）
```

---

## 8. 文档更新规范

### 8.1 更新流程
1. **获取当前时间**（使用系统命令）
2. **修改文档内容**
3. **更新"最后更新"时间**
4. **添加版本历史记录**
5. **更新版本号**（如需要）

### 8.2 更新记录
每次更新必须记录：
- 更新时间（精确到秒）
- 更新内容（简要描述）
- 更新人（Agent或开发者名称）

### 8.3 重大更新
以下情况需要创建新版本文档：
- 文档结构重大调整
- 内容大幅增减（超过50%）
- 目标受众变化

---

## 9. 质量检查清单

### 9.1 提交前检查
在提交文档前，必须检查：

- [ ] ? 时间使用真实的系统时间（非占位符）
- [ ] ? 时间格式正确（YYYY-MM-DD HH:mm:ss）
- [ ] ? 文档头部信息完整
- [ ] ? 版本号正确
- [ ] ? 链接可正常访问
- [ ] ? 代码示例可运行
- [ ] ? 无错别字
- [ ] ? Markdown格式正确
- [ ] ? 文件编码为UTF-8
- [ ] ? 行尾符统一（LF或CRLF）

### 9.2 自动化检查
可使用以下工具：
- **Markdown Lint**: 检查Markdown格式
- **Vale**: 检查文档风格
- **Git Hooks**: 提交前自动检查

---

## 10. 特殊场景处理

### 10.1 历史文档补充时间
如果需要为历史文档补充时间：

**方法1: 使用Git历史**
```bash
# 查看文件的创建时间
git log --diff-filter=A --follow --format=%aI -- 文件路径

# 查看文件的最后修改时间
git log -1 --format=%aI -- 文件路径
```

**方法2: 标注为估算时间**
```markdown
> **创建日期**: 2026-01-01 10:00:00 [估算]  
> **说明**: 根据Git历史记录估算，实际时间可能有偏差
```

### 10.2 跨时区协作
如果团队成员在不同时区：
- 统一使用北京时间（UTC+8）
- 或在文档中明确标注时区

```markdown
**创建日期**: 2026-01-02 18:16:05 (UTC+8)
```

### 10.3 长期项目
对于长期项目，定期归档旧文档：
- 每个季度归档一次
- 在归档文档中添加 `[已归档]` 标记
- 说明归档原因和时间

### 10.4 超长文档分割规范 ??????

#### 为什么需要分割？
单个文档过长会导致以下问题：
- ? **读取不完整** - AI工具或编辑器可能无法完整读取
- ? **写入截断** - 编辑时可能丢失部分内容
- ? **维护困难** - 难以快速定位和修改
- ? **协作冲突** - 多人同时编辑易产生冲突
- ? **性能问题** - 打开和编辑速度慢

#### 文档长度限制

##### 硬性限制（必须遵守）
| 类型 | 行数限制 | 字符数限制 | 文件大小限制 |
|------|---------|-----------|------------|
| **普通文档** | ≤800行 | ≤50,000字符 | ≤100KB |
| **技术文档** | ≤1000行 | ≤60,000字符 | ≤120KB |
| **规划文档** | ≤1200行 | ≤70,000字符 | ≤150KB |

##### 建议分割线
| 警告级别 | 行数 | 字符数 | 操作建议 |
|---------|------|--------|---------|
| ?? 安全 | <600行 | <40,000字符 | 无需分割 |
| ?? 警告 | 600-800行 | 40,000-50,000字符 | 考虑分割 |
| ?? 危险 | 800-1000行 | 50,000-60,000字符 | 应该分割 |
| ?? 严重 | >1000行 | >60,000字符 | 必须分割 |

#### 分割方式

##### 方式1: 按章节分割（推荐）
**适用场景**: 文档章节较多，逻辑独立

**命名格式**:
```
文档名称-Part1-章节主题.md
文档名称-Part2-章节主题.md
文档名称-Part3-章节主题.md
```

**示例**:
```
文档编写规范-Part1-基础规范.md      (第1-5章)
文档编写规范-Part2-高级规范.md      (第6-10章)
文档编写规范-Part3-归档与模板.md    (第11-12章)
文档编写规范-Part4-FAQ与执行.md     (第13-15章)
```

**索引文档**:
```markdown
# ?? SceneTodo 文档编写规范（总索引）

> **文档说明**: 本规范分为4个部分，请根据需要查阅相应章节。

## ?? 文档部分

### [Part 1: 基础规范](文档编写规范-Part1-基础规范.md) ?????
**必读**: 第1-5章
- 第1章: 文档命名规范
- 第2章: 文档结构规范
- 第3章: 时间处理规范
- 第4章: 文档版本管理
- 第5章: Markdown格式规范

### [Part 2: 高级规范](文档编写规范-Part2-高级规范.md) ????
**重要**: 第6-10章
- 第6章: 内容编写规范
- 第7章: 文档分类与存放
- 第8章: 文档更新规范
- 第9章: 质量检查清单
- 第10章: 特殊场景处理

### [Part 3: 归档与模板](文档编写规范-Part3-归档与模板.md) ?????
**重要**: 第11-12章
- 第11章: 文档归档规范
- 第12章: 示例模板

### [Part 4: FAQ与执行](文档编写规范-Part4-FAQ与执行.md) ???
**参考**: 第13-15章
- 第13章: 常见问题
- 第14章: 规范执行
- 第15章: 规范更新
```
 
##### 方式2: 按主题分割
**适用场景**: 文档涉及多个独立主题

**命名格式**:
```
主题名称-子主题.md
```

**示例**:
```
技术文档-架构设计.md
技术文档-数据库设计.md
技术文档-API接口.md
```

##### 方式3: 按版本分割
**适用场景**: 历史版本需要保留

**命名格式**:
```
文档名称-v版本号.md
```

**示例**:
```
项目规划-v1.0.md
项目规划-v2.0.md
```

#### 分割流程

##### 步骤1: 检查文档长度（2分钟）
```bash
# PowerShell 检查脚本
$file = "Doc\00-必读\文档编写规范.md"
$content = Get-Content $file
$lines = $content.Count
$chars = ($content | Measure-Object -Character).Characters
$size = (Get-Item $file).Length

Write-Host "行数: $lines"
Write-Host "字符数: $chars"
Write-Host "文件大小: $size 字节"

if ($lines -gt 1000) {
    Write-Host "?? 严重: 必须分割" -ForegroundColor Red
} elseif ($lines -gt 800) {
    Write-Host "?? 危险: 应该分割" -ForegroundColor Yellow
} elseif ($lines -gt 600) {
    Write-Host "?? 警告: 考虑分割" -ForegroundColor Yellow
} else {
    Write-Host "?? 安全: 无需分割" -ForegroundColor Green
}
```

##### 步骤2: 规划分割方案（10分钟）
确定分割方式：
- [ ] 按章节分割（推荐）
- [ ] 按主题分割
- [ ] 按版本分割

确定分割点：
- 逻辑完整（不破坏章节结构）
- 大小均衡（各部分大小相近）
- 独立性强（减少交叉引用）

##### 步骤3: 创建索引文档（15分钟）
1. 创建总索引文档（原文档名）
2. 列出所有部分和章节
3. 添加链接和说明
4. 保持原有元数据

##### 步骤4: 拆分内容（30-60分钟）
```bash
# 示例：拆分为4个部分
# Part 1: 第1-5章
# Part 2: 第6-10章
# Part 3: 第11-12章
# Part 4: 第13-15章
```

对每个部分：
1. 创建新文件
2. 复制相应章节
3. 添加文档头部
4. 添加导航链接
5. 更新内部链接

##### 步骤5: 更新交叉引用（20分钟）
- 更新所有指向原文档的链接
- 更新内部章节引用
- 验证所有链接有效性

##### 步骤6: 验证完整性（15分钟）
- [ ] 所有章节内容完整
- [ ] 索引文档准确
- [ ] 链接全部有效
- [ ] 格式正确统一
- [ ] 编译测试通过

#### 分割后的文档结构

##### 索引文档头部
```markdown
# ?? [文档名称]（总索引）

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: X.X  
> **状态**: 正式发布  
> **文档类型**: 分割文档索引

---

## ?? 文档说明

本文档因内容过长已分割为多个部分，请根据需要查阅相应部分。

**总统计**:
- 部分数量: X个
- 总章节数: XX章
- 总行数: ~XXXX行
- 总字符数: ~XX,XXX字符

---

## ?? 快速导航

[概述](#概述) | [Part 1](#part-1) | [Part 2](#part-2) | [完整版本历史](#版本历史)

---
```

##### 部分文档头部
```markdown
# ?? [文档名称] - Part X: [部分主题]

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: X.X  
> **状态**: 正式发布  
> **所属文档**: [文档名称]  
> **部分编号**: Part X / 总Y部分

---

## ?? 导航

?? [返回总索引](文档名称.md) | [上一部分](Part-X-1.md) | [下一部分](Part-X+1.md) ??

---

## ?? 本部分内容

本部分包含以下章节：
- 第X章: 章节名称
- 第Y章: 章节名称

---
```

#### 分割最佳实践

##### 1. 提前规划
- ? 文档创建时就考虑长度
- ? 超过600行开始规划分割
- ? 不要等到超过1000行

##### 2. 保持完整性
- ? 索引文档必须包含所有信息
- ? 各部分可独立阅读
- ? 交叉引用明确清晰

##### 3. 版本同步
- ? 所有部分使用相同版本号
- ? 同时更新所有相关部分
- ? 版本历史在索引文档中统一管理

##### 4. 用户体验
- ? 清晰的导航结构
- ? 快速跳转链接
- ? 移动端友好（避免过长滚动）

#### 何时不应该分割

以下情况不建议分割：
- ? 文档逻辑高度关联，分割会破坏理解
- ? 临时文档，短期内会删除
- ? 个人笔记或草稿
- ? 文档还在快速迭代中

这些情况下，应该：
- ? 优化内容，删除冗余
- ? 提炼重点，简化表达
- ? 等待内容稳定后再分割

#### 分割示例

##### 分割前（1022行，21KB）
```
文档编写规范.md  [1022行]
├── 第1章: 文档命名规范
├── 第2章: 文档结构规范
├── 第3章: 时间处理规范
├── 第4章: 文档版本管理
├── 第5章: Markdown格式规范
├── 第6章: 内容编写规范
├── 第7章: 文档分类与存放
├── 第8章: 文档更新规范
├── 第9章: 质量检查清单
├── 第10章: 特殊场景处理
├── 第11章: 文档归档规范
├── 第12章: 示例模板
├── 第13章: 常见问题
├── 第14章: 规范执行
└── 第15章: 规范更新

?? 行数: 1022 > 1000（超限）
```

##### 分割后（4个文件）
```
文档编写规范.md  [索引，约50行]
├── 总体说明
├── 快速导航
├── 各部分链接
└── 完整版本历史

文档编写规范-Part1-基础规范.md  [约300行]
├── 第1章: 文档命名规范
├── 第2章: 文档结构规范
├── 第3章: 时间处理规范
├── 第4章: 文档版本管理
└── 第5章: Markdown格式规范

文档编写规范-Part2-高级规范.md  [约300行]
├── 第6章: 内容编写规范
├── 第7章: 文档分类与存放
├── 第8章: 文档更新规范
├── 第9章: 质量检查清单
└── 第10章: 特殊场景处理

文档编写规范-Part3-归档与模板.md  [约300行]
├── 第11章: 文档归档规范
└── 第12章: 示例模板

文档编写规范-Part4-FAQ与执行.md  [约200行]
├── 第13章: 常见问题
├── 第14章: 规范执行
└── 第15章: 规范更新

?? 最大文件: 300行 < 800行（安全）
```

---

## 11. 文档归档规范 ??????

### 11.1 归档原则

#### 核心原则
1. ? **历史归档** - 已完成会话的规划文档归档到会话记录目录
2. ? **当前保留** - 当前会话的规划文档保留在规划目录
3. ? **交接保留** - 会话间交接文档临时保留在规划目录，方便下一轮查阅
4. ? **保持简洁** - 规划目录仅保留当前和未来会话的规划文档

#### 为什么要归档？
- ?? **目录简洁** - 规划目录不会积累过多历史文档
- ?? **历史完整** - 每个会话的所有文档集中在一处
- ?? **查找方便** - 分类清晰，易于定位
- ?? **聚焦当前** - 下一轮开发时只需关注当前规划

### 11.2 归档时机

#### 触发条件（满足所有条件）
- ? 会话已100%完成
- ? 下一会话规划已就绪
- ? 交接文档已创建
- ? 归档不影响下一会话开发

#### 归档时间点
在完成当前会话后，开始下一会话前进行归档。

**示例时间线**:
```
Session-05 完成 → 创建交接文档 → 归档 Session-05 规划 → Session-06 开始
```

### 11.3 归档范围

#### 需要归档的文档（从规划目录移至会话记录）
```
Doc/06-规划文档/
├── Session-XX-执行规划.md              ? 归档
├── Session-XX-执行清单.md              ? 归档
├── Session-XX-规划总结.md              ? 归档
├── Session-XX-规划优化报告.md          ? 归档
└── Session-XX相关的其他规划文档        ? 归档
```

#### 保留在规划目录的文档
```
Doc/06-规划文档/
├── Session-XX到Session-XX+1交接文档.md  ? 保留（下一轮需要）
├── Session-XX+1-执行规划.md            ? 保留（当前规划）
├── Session-XX+1-执行清单.md            ? 保留（当前清单）
└── README-Session-XX+1规划索引.md      ? 保留（当前索引）
```

#### 不需要归档的文档
```
Doc/06-规划文档/
├── PRD-初稿.md                         ? 保留（产品需求文档）
├── README-规划文档说明.md              ? 保留（总索引）
└── 其他非会话相关文档                   ? 保留
```

### 11.4 归档流程

#### 步骤1: 确认归档条件（5分钟）
```bash
# 检查清单
- [ ] Session-XX 已100%完成
- [ ] Session-XX+1 规划文档已创建
- [ ] 交接文档已创建
- [ ] 归档不影响下一会话开发
```

#### 步骤2: 移动规划文档（10分钟）
```bash
# 使用 PowerShell 移动文件
Move-Item "Doc\06-规划文档\Session-XX-执行规划.md" "Doc\01-会话记录\Session-XX-主题\"
Move-Item "Doc\06-规划文档\Session-XX-执行清单.md" "Doc\01-会话记录\Session-XX-主题\"
Move-Item "Doc\06-规划文档\Session-XX-规划总结.md" "Doc\01-会话记录\Session-XX-主题\"
# ... 移动所有 Session-XX 相关规划文档
```

**注意事项**:
- ? 确保目标目录存在
- ? 不要移动交接文档（Session-XX到Session-XX+1）
- ? 不要移动当前会话（Session-XX+1）的文档
- ? 不要移动非会话相关的文档（如PRD）

#### 步骤3: 更新索引文档（10分钟）
**更新 Session-XX 会话记录的 README**:
```markdown
# Session-XX 会话记录

## ?? 文档索引

### 核心文档
1. Session-XX完成总结.md
2. 功能实现报告.md
...

### 规划文档（已归档）
1. Session-XX-执行规划.md          ? 归档
2. Session-XX-执行清单.md          ? 归档
3. Session-XX-规划总结.md          ? 归档
...

### 归档说明
- 文档归档说明.md                 ? 新增
- 最终归档完成报告.md             ? 新增
```

**更新规划目录的 README**:
```markdown
# ?? 规划文档目录说明

> **更新日期**: YYYY-MM-DD HH:mm:ss  
> **当前规划**: Session-XX+1

## ?? 当前规划文档（Session-XX+1）
- Session-XX+1-执行规划.md
- Session-XX+1-执行清单.md
- Session-XX到Session-XX+1交接文档.md

## ??? 历史规划文档（已归档）
### Session-XX 规划文档
**归档位置**: Doc/01-会话记录/Session-XX-主题/
**归档日期**: YYYY-MM-DD HH:mm:ss
```

#### 步骤4: 创建归档说明文档（10分钟）
在会话记录目录创建：
```markdown
# ?? Session-XX 文档归档说明

> **归档日期**: YYYY-MM-DD HH:mm:ss  
> **归档操作**: Session-XX 规划文档归档

## ?? 归档概要
说明归档原因和过程...

## ?? 已归档文档
列出归档的文件...

## ?? 归档效果
对比归档前后的目录结构...
```

#### 步骤5: 验证归档结果（10分钟）
```bash
# 检查清单
- [ ] Session-XX 规划文档已全部移至会话记录
- [ ] 交接文档保留在规划目录
- [ ] Session-XX+1 文档正常保留
- [ ] 所有索引已更新
- [ ] 归档说明文档已创建
- [ ] 编译测试通过
```

### 11.5 归档检查清单

#### 文件完整性检查
- [ ] ? 所有 Session-XX 规划文档已移动
- [ ] ? 无文件丢失
- [ ] ? 无重复文件
- [ ] ? 交接文档保留在规划目录
- [ ] ? Session-XX+1 文档完整

#### 索引更新检查
- [ ] ? Session-XX/README.md 已更新
- [ ] ? 规划目录/README 已更新
- [ ] ? 新增文档归档说明
- [ ] ? 所有链接有效

#### 质量验证检查
- [ ] ? 编译测试通过（0错误 0警告）
- [ ] ? 文档格式正确
- [ ] ? 时间戳准确
- [ ] ? 目录结构清晰

### 11.6 归档后的目录结构

#### 标准结构示例

**会话记录目录（归档后）**:
```
Doc/01-会话记录/Session-XX-主题/
├── README.md                       ? 更新索引
├── 会话记录文档（原有）
├── Session-XX-规划.md              ? 归档
├── Session-XX-清单.md              ? 归档
└── 归档说明.md                     ? 新增

Session-XX 文档完整归档 ?
```

**规划目录（归档后）**:
```
Doc/06-规划文档/
├── README-规划文档说明.md                 ? 已更新
├── README-Session-XX+1规划索引.md         ? 当前索引
│
├── 交接文档（临时保留）
│   └── Session-XX到Session-XX+1交接文档.md  ? 保留
│
├── Session-XX+1 规划文档（当前）
│   ├── Session-XX+1-执行规划.md           ? 当前规划
│   └── Session-XX+1-执行清单.md           ? 当前清单
│
└── 其他文档（非会话相关）
    ├── PRD-初稿.md                        ? 保留
    └── ...
```

### 11.7 归档的特殊情况

#### 情况1: 跨多个会话的交接文档
如果交接文档涉及多个会话（如 Session-04到Session-06）：
- 保留在规划目录，直到 Session-06 完成
- Session-06 完成后，随 Session-06 一起归档

#### 情况2: 长期规划文档
如 PRD、产品路线图等长期文档：
- 不归档，始终保留在规划目录
- 定期更新版本号
- 在文档中标注适用范围

#### 情况3: 未完成的会话
如果会话中途暂停：
- 不归档，保留在规划目录
- 在 README 中标注状态为"暂停"或"进行中"
- 说明暂停原因和预计恢复时间

### 11.8 归档最佳实践

#### 1. 及时归档
- ? 每个会话完成后立即归档
- ? 不要积累多个会话后统一归档

#### 2. 完整文档
- ? 确保归档说明文档完整
- ? 记录归档原因、过程、结果
- ? 更新所有相关索引

#### 3. 保持简洁
- ? 规划目录仅保留当前和未来会话
- ? 交接文档及时随会话归档
- ? 定期清理临时文档

#### 4. 链接维护
- ? 更新所有指向已归档文档的链接
- ? 使用相对路径
- ? 验证链接有效性

### 11.9 归档示例

#### 归档前
```
Doc/06-规划文档/
├── Session-04-规划.md
├── Session-04-清单.md
├── Session-05-规划.md              ← 需要归档
├── Session-05-清单.md              ← 需要归档
├── Session-05到06交接.md           ← 保留
├── Session-06-规划.md              ← 当前保留
└── Session-06-清单.md              ← 当前保留

共7个文件，混杂多个会话
```

#### 归档后
```
Doc/06-规划文档/
├── Session-05到06交接.md           ? 保留
├── Session-06-规划.md              ? 保留
└── Session-06-清单.md              ? 保留

共3个文件，仅保留当前会话 ?

Doc/01-会话记录/Session-05-主题/
├── README.md                       ? 更新
├── 会话记录（原有）
├── Session-05-规划.md              ? 归档
├── Session-05-清单.md              ? 归档
└── 归档说明.md                     ? 新增

Session-05 文档完整归档 ?
```

---

## 12. 示例模板

### 12.1 功能文档模板

```markdown
# ?? [功能名称]功能文档

> **创建日期**: YYYY-MM-DD HH:mm:ss  
> **最后更新**: YYYY-MM-DD HH:mm:ss  
> **版本**: 1.0  
> **状态**: 正式发布

---

## ?? 功能说明

简要描述功能的目的和作用。

---

## ? 功能特性

- 特性1
- 特性2
- 特性3

---

## ?? 使用方法

### 步骤1
操作说明...

### 步骤2
操作说明...

---

## ?? 技术实现

### 关键代码
```csharp
// 代码示例
```

### 关键文件
- 文件1
- 文件2

---

## ?? 测试

### 测试用例
1. 测试场景1
2. 测试场景2

---

## ?? 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | YYYY-MM-DD HH:mm:ss | 初始版本 | Agent-XX |

---

**文档版本**: 1.0  
**创建日期**: YYYY-MM-DD HH:mm:ss  
**最后更新**: YYYY-MM-DD HH:mm:ss
```

### 12.2 会话交接文档模板

```markdown
# ?? SceneTodo 会话交接文档 vX.X

> **会话时间**: YYYY-MM-DD HH:mm:ss - YYYY-MM-DD HH:mm:ss  
> **总耗时**: X小时XX分钟  
> **会话主题**: [主题描述]  
> **文档版本**: X.X  
> **状态**: 已完成

---

## ?? 会话概述

简要说明本次会话的目标和完成情况。

---

## ? 完成的工作

### 1. 工作项1
详细说明...

### 2. 工作项2
详细说明...

---

## ?? 统计数据

- 新增代码: XX行
- 修改文件: XX个
- 新增文档: XX个

---

## ?? 重要注意事项

1. 注意事项1
2. 注意事项2

---

## ?? 下一步工作

1. 任务1
2. 任务2

---

## ?? 变更记录

| 时间 | 文件 | 变更类型 | 说明 |
|------|------|----------|------|
| YYYY-MM-DD HH:mm:ss | 文件1 | 新增 | 说明 |
| YYYY-MM-DD HH:mm:ss | 文件2 | 修改 | 说明 |

---

**文档版本**: X.X  
**创建日期**: YYYY-MM-DD HH:mm:ss  
**最后更新**: YYYY-MM-DD HH:mm:ss
```

---

## 13. 常见问题

### Q1: 如何快速获取当前时间？
**A**: 在终端执行 `Get-Date -Format "yyyy-MM-dd HH:mm:ss"`（PowerShell）

### Q2: 文档放在哪个目录？
**A**: 参考第7章"文档分类与存放"，根据文档类型选择目录。

### Q3: 如何处理旧文档的时间占位符？
**A**: 可以使用Git历史查找实际时间，或标注为"[估算]"。

### Q4: 是否需要每次小修改都更新版本号？
**A**: 
- 修复错别字、格式调整：不需要更新版本号
- 新增章节、修改内容：更新修订版本（如1.0→1.1）
- 重大重构：更新主版本（如1.X→2.0）

### Q5: 什么时候需要归档文档？
**A**: 当一个会话100%完成，且下一会话规划已就绪时，立即归档该会话的规划文档。

### Q6: 交接文档需要归档吗？
**A**: 交接文档临时保留在规划目录，方便下一轮开发查阅。当下一会话完成后，交接文档随该会话一起归档。

### Q7: 如何判断哪些文档需要归档？
**A**: 所有以"Session-XX"开头的规划文档都需要归档，但交接文档（Session-XX到Session-XX+1）临时保留。

### Q8: 归档后发现遗漏文档怎么办？
**A**: 立即补充移动遗漏文档，更新索引，并在归档说明中记录补充操作。

---

## 14. 规范执行

### 14.1 强制性规范（必须遵守）
- ?? **时间必须使用真实系统时间**
- ?? **禁止使用占位符（如2025-01-XX）**
- ?? **文档头部信息必须完整**
- ?? **时间格式必须统一**
- ?? **会话完成后必须及时归档规划文档**
- ?? **归档必须更新所有相关索引**
- ?? **归档必须创建归档说明文档**

### 14.2 建议性规范（推荐遵守）
- 使用清晰的标题结构
- 添加必要的代码注释
- 提供示例和截图
- 定期整理文档结构

### 14.3 违反规范的处理
如果发现文档违反规范：
1. 在文档顶部添加 `[不规范]` 标记
2. 说明违反的具体规范
3. 提供改进建议
4. 在下次更新时修正

---

## 15. 规范更新

### 15.1 更新流程
本规范文档也会持续更新：
1. 收集反馈和问题
2. 讨论改进方案
3. 更新规范内容
4. 通知所有成员

### 15.2 版本历史

| 版本 | 日期 | 变更内容 | 变更人 |
|------|------|----------|--------|
| 1.0 | 2026-01-02 18:16:05 | 初始版本，添加时间处理规范 | AI Agent |
| 1.1 | 2026-01-02 20:45:06 | 添加完整的文档归档规范（第11章） | AI Agent |
| 1.1.1 | 2026-01-02 21:38:26 | 修复版本历史丢失问题，恢复完整章节 | AI Agent |
| 1.2 | 2026-01-02 21:43:56 | 添加超长文档分割规范（第10.4节） | AI Agent |

---

## ?? 反馈与建议

如果您对本规范有任何建议或疑问：
1. 在项目中创建Issue
2. 在文档中添加注释
3. 在会话记录中说明

---

**祝您编写愉快！规范的文档让协作更高效！** ???

---

**文档版本**: 1.2  
**创建日期**: 2026-01-02 18:16:05  
**最后更新**: 2026-01-02 21:43:56  
**维护者**: SceneTodo Team
